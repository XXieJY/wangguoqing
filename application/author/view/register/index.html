<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>作者入驻-{:config('queue.A_Name')}</title>
    <link rel="shortcut icon" href="__STATIC__/images/Favicon.ico" type="image/x-icon" />
    <link rel="stylesheet" type="text/css" href="__STATIC__/author/css/rest.css"/>
    <link rel="stylesheet" href="__STATIC__/author/css/header.css" />
    <link rel="stylesheet" href="__STATIC__/author/css/footer.css" />
    <link rel="stylesheet" href="__STATIC__/author/css/contain.css" />
    <link rel="stylesheet" href="__STATIC__/author/css/del.css" />
    <!--<script src="http://libs.baidu.com/jquery/2.0.0/jquery.min.js"></script>-->
    <script src="https://cdn.bootcss.com/jquery/1.11.1/jquery.min.js"></script>
    <style type="text/css">
        .form-control .inputBox {
            width: 286px;
            height: 36px;
            padding-left: 12px;
            border: 1px solid #ccc;
            background-color: #fff;
            margin-right: 18px;
            border-radius: 2px;
        }


    </style>
    <script type="text/javascript">
       function checkForm() {
           if(form.email.value==""){
               alert('用户名不能为空');
               form.email.focus();
               return false;
           }
           if(form.phone.value==""){
               alert('手机号不能为空');
               form.phone.focus();
               return false;
           }
           if(form.code.value==""){
               alert('验证码不能为空');
               form.code.focus();
               return false;
           }
           if(form.password.value==""){
               alert('密码不能为空');
               form.password.focus();
               return false;
           }
           if(form.password.value!=form.nextword.value){
               alert('两次密码不一样');
               form.password.focus();
               return false;
           }
       } 
        
        
    </script>


</head>
<body>
<!--头部 begin-->
{include file="public/login"}
<!--头部 end-->
<!--中间容器 BEGIN-->
<div class="wrap">
    <div class="wrap-nav">
        <span class="fl">申请作者</span>
        <p class="fr att">
            带有<span>*</span> 的项目必须填写
        </p>
    </div>
    <!--注册导航栏 BEGIN-->
    <div class="regNav">
        <ul class="navList">
            <li class="cur">注册通行证  &gt;</li>
            <li>接受协议   &gt;</li>
            <li>填写资料  &gt;</li>
            <li>申请成功  &gt;</li>
            <li>创建作品  &gt;</li>
            <li>上传章节  &gt;</li>
            <li>完善信息  &gt;</li>
            <li>等待审核 </li>
        </ul>
    </div>
    <!--注册导航栏 end-->

    <form action="{:url('Register/register')}" name="form" method="post" class="form " onsubmit="return checkForm();">
        <!--用户提交注册信息栏 begin-->
        <div class="wrapInfo ">
            <!--邮箱-->
            <div class="form-control">
                <label for="email" class="fl"><span class="fr"><i class="col">*</i>用户名（邮箱）：</span></label>
                <input type="text" name='email' placeholder="请输入邮箱" id="email" class="fl inputBox">
                <p class="fl emailWarn warn">请正确填写常用Email地址（请在英文半角状态下输入）</p>
            </div>
            <!--手机号码-->
            <div class="form-control">
                <label for="phone" class="fl"><span class="fr"><i class="col">*</i>手机号：</span></label>
                <input type="text" name='phone' placeholder="请输入手机号" id="phone" class="fl inputBox"/>
                <p class="fl phoneWarn warn">11位数字电话只包含数字，目前仅支持中国大陆手机号</p>
            </div>
            <!--手机验证码-->
            <div class="form-control">
                <label for="code" class="fl"><span class="fr"><i class="col">*</i>验证码：</span></label>
                <input type="text" name='code' placeholder="验证码" id="code" class="fl code "/>
               <a href="javascript:"  class="fl  codeBtn" style="text-align: center;height: 38px;">获取验证码</a>
                <p class="fl warn codeWran">请输入手机收到的4位验证码，验证码30分钟内有效</p>
            </div>

            <div class="form-control pwds">
                <label for="pwd" class="fl"><span class="fr"><i class="col">*</i>密码：</span></label>
                <div class="fl pwd">
                    <input type="password" name='password' placeholder="请设置密码" id="pwd" class="fl inputBox" maxlength="16"/>
                    <img class="fl show"  src="__STATIC__/author/images/authors_login_btn_hide.png"/>
                </div>
                <p class="fl pwdWarn warn">8-16位，至少包含一个大写字母，一个小写字母，一个数字，一个特殊字符*[!+@#%^&*()_-]，例：Shuddd111_或Shuddd!666</p>
            </div>
            <div class="form-control ">
                <label for="repwd" class="fl"><span class="fr"><i class="col">*</i>确认密码：</span></label>
                <div class="fl pwd">
                    <input type="password" name='nextword' placeholder="请再次输入密码" id="repwd" class="fl inputBox" maxlength="16"/>
                    <img class="fl show"  src="__STATIC__/author/images/authors_login_btn_hide.png"/>
                </div>
                <p class="warn pwdWarns  fl "></p>
            </div>
            <div class="form-control ">
                <input type="submit"  value="下一步" id="sub"  />
            </div>

        </div>
        <!--用户提交注册信息栏 end-->

    </form>


</div>
<!--中间容器 end-->
<!--底部 BEGIN-->
{include file="public/bot"}
<!--底部 END-->

<div class="mask dn agree">
    <div class="maskwrap">
        <p class="nav"><span class="fl">提示</span> <span onclick="re_register()" class="fr close" ></span></p>
        <p class="ts">系统检测到该邮箱账号目前正处于接受协议状态，请前往</p>
        <p class="btn btnDel">
            <input type="hidden" name="id" value="" id="a_id">
            <span onclick="re_register()" style="cursor:pointer"  class="fl" >重新注册</span>
            <button onclick="goTo();"  class=" fl act" >前往操作</button>
        </p>
    </div>
</div>

<div class="mask dn user">
    <div class="maskwrap">
        <p class="nav"><span class="fl">提示</span> <span onclick="re_register1();" class="fr close" ></span></p>
        <p class="ts">系统检测到该邮箱账号目前正处于填写资料状态，请前往</p>
        <p class="btn btnDel">
            <input type="hidden" name="id" value="" id="u_id">
            <span onclick="re_register1()" style="cursor:pointer"  class="fl" >重新注册</span>
            <button onclick="goTo1()"  class=" fl act" >前往操作</button>
        </p>
    </div>
</div>

<script src="__STATIC__/author/js/register.js" type="text/javascript" charset="utf-8"></script>
<!--<script src="__STATIC__/author/js/jq-select.js" type="text/javascript" charset="utf-8"></script>-->
<!--<script src="__STATIC__/author/js/scroll.js" type="text/javascript" charset="utf-8"></script>-->
</body>
</html>
<script type="text/javascript">
    function re_register() {
       var id=$("#a_id").val();
       $.ajax({
           url:"/api/Register/delete",
           type:"post",
           data:{'id':id},
           success:function (data) {
               if(data==1){
                   window.location.href="/author/Register/index";
               }else {
                   alert('系统错误');
                   window.location.href="/author/Register/index";
               }
           }


       })
    }

    function re_register1() {
        var id=$("#u_id").val();
        $.ajax({
            url:"/api/Register/delete",
            type:"post",
            data:{'id':id},
            success:function (data) {
                if(data==1){
                    window.location.href="/author/Register/index";
                }else {
                    alert('系统错误');
                    window.location.href="/author/Register/index";
                }
            }


        })
    }
function goTo() {
    var id=$("#a_id").val();
    window.location.href="/author/Register/agreement/id/"+id;
}

    function goTo1() {
        var id=$("#u_id").val();

        window.location.href="/author/Register/user/id/"+id;
    }



</script>

<script type="text/javascript">
    function code() {
        var phone =document.getElementById("phone").value;
        if(flag){

            $.ajax({
                url: "/api/Send/code",
                type: "post",
                data:{'phone':phone},
                success: function (data) {

                    if(data==1){
                        alert('手机号码格式不正确');
                        return false;
                    }
                    if(data==3){
                        alert('验证码发送失败');
                        return false;
                    }
                    if(data==2){
                        alert('验证码发送成功');
                    }
                }
            });
        }else {
            alert('请输入合法的手机号')
        }

    }


</script>

<script>

    //定义一个标识符
    var isBox = false; // 定义一个触发焦点事件的开关，默认为不开启状态 || 也可以给input设置一个属性，来判断

    //获取焦点
    $('.sels').on('focus','input',function(){
        //下拉列表显示
//	alert(1);
        $(this).siblings('.roll-list').show();
        isBox=true;
    })

    $(".sels").mouseover(function () { // 鼠标进入input-box区域内打开焦点开关
        $(this).addClass('act');
        isBox = true;
    });
    $(".sels").mouseout(function () { // 鼠标离开input-box区域内关闭焦点开关
        $(this).removeClass('act');
        isBox = false;
    });

    $('.sels').on('blur','input',function(){ // input失去焦点时通过焦点开关状态判断鼠标所在区域
        if (isBox == true) return false;
        $(this).siblings(".roll-list").hide();
    });

    //文本框焦点事件

    $('.inputBox').on('focus',function(){
        $(this).addClass('act');
//		alert(11);
    });
    $('.inputBox').on('blur',function(){
        $(this).removeClass('act');
//	 	alert(12)
    })
    $('.disabled').on('focus',function(){
        $(this).removeClass('act');
//		alert(11);
    });
    //复值
    $('.roll-list').each(function(){
        $(this).on('click','li',function(){
            var txt = $(this).text();
            $(this).parent().siblings('.txt').val(txt);
            $(this).parent().siblings('.txt').attr('value',txt)
            $(this).parent().hide();
        })
    })



    $('#code').on('focus',function(){
        $(this).addClass('act');
//		alert(11);
    });
    $('#code').on('blur',function(){
        $(this).removeClass('act');
//	 	alert(12)
    })
</script>
<script>
    $("#email").hover(function () {
        $(this).addClass('act')
    },function () {
        $(this).removeClass('act')
    })
    $("#phone").hover(function () {
        $(this).addClass('act')
    },function () {
        $(this).removeClass('act')
    })
    $("#code").hover(function () {
        $(this).addClass('act')
    },function () {
        $(this).removeClass('act')
    })
    $("#pwd").hover(function () {
        $(this).addClass('act')
    },function () {
        $(this).removeClass('act')
    })
    $("#repwd").hover(function () {
        $(this).addClass('act')
    },function () {
        $(this).removeClass('act')
    })

</script>